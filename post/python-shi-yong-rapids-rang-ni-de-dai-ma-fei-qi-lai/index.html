<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Jiank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>
<meta name="keywords" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://yooinn.github.io//favicon.ico">

<link rel="stylesheet" href="https://yooinn.github.io//styles/main.css">

<!-- Modernizr JS -->
<script src="https://yooinn.github.io/media/scripts/vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://yooinn.github.io//media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
    

    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://yooinn.github.io//media/images/avatar.png" alt="Jiank" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>Jiank</h2>
        <p>æ¸©æ•…è€ŒçŸ¥æ–°</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://yooinn.github.io//tag/tXH4POF09">python</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/QRAqbdG_m">django</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/jj-MVXJyc">mongodb</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/FuqRNjlSWx">çˆ¬è™«</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/LIFaQWPrF">Centos</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/ewoty_xe6">CSRF</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/Mz5dw6SaJF">æ”»å‡»</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/mgBwHqvScq">ä»£ç†</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/wV8K1iN-L">sublime</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/FTcnjIO1M9">å¼€å‘ç¯å¢ƒ</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/slsqa3JFOO">åŠ å¯†</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/IL7UdZM90j">è§£å¯†</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/HOyveGXQl">redis</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/b9SNjXwUQ6">ç¼“å­˜</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/zE5M8ZF1G">ç®—æ³•</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/8ds-G3FOk2">é˜Ÿåˆ— æ¶ˆæ¯ çº¿ç¨‹</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/QakZrWwK7">mysql</a></li>
                
                    <li><a href="https://yooinn.github.io//tag/gridea">Gridea</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://yooinn.github.io/">Jiank</a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://yooinn.github.io//tag/tXH4POF09" class="tag">python, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Python----ä½¿ç”¨Rapidsè®©ä½ çš„ä»£ç é£èµ·æ¥</h2>
              <span class="fh5co-meta fh5co-date animate-box">2019-11-21</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>Pythonæ˜¯ç¤¾åŒºé‡Œæœ€å—å–œçˆ±çš„ç¼–ç¨‹è¯­è¨€ï¼å®ƒæ˜¯ç›®å‰ä¸ºæ­¢æœ€æ˜“ä½¿ç”¨çš„è¯­è¨€ï¼Œå› ä¸ºå®ƒçš„ä»£ç çŸ­å°ç²¾æ‚ï¼Œç¬¦åˆäººä»¬çš„æ€ç»´æ–¹å¼ï¼Œä¹Ÿç¬¦åˆäººä»¬çš„é˜…è¯»ä¹ æƒ¯ã€‚</p>
<p>ä½†æ˜¯ä½ ä¼šç»å¸¸å¬åˆ°æœ‰äººåæ§½Pythonï¼Œå°¤å…¶æ˜¯æœ‰äº›Cè¯­è¨€çš„å¤§ç‰›åæ§½Pythoné€Ÿåº¦æ…¢ã€‚</p>
<p>ä»–ä»¬è¯´å¾—æ²¡é”™ï¼Œç›¸æ¯”å…¶ä»–é«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œå¦‚Cè¯­è¨€æ¥è¯´ï¼ŒPythonç¡®å®é€Ÿåº¦å¾ˆæ…¢ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºCè¯­è¨€æ›´é¢å‘è®¡ç®—æœºåº•å±‚ï¼Œåƒä¸€äº›å•ç‰‡æœºã€ç”µè·¯æ¿çš„è®¾è®¡éƒ½ä½¿ç”¨Cè¯­è¨€ï¼ŒCè¯­è¨€å’Œæ±‡ç¼–è¯­è¨€ä¹‹é—´çš„è½¬æ¢ä¹Ÿæ›´å¿«ï¼Œä½†æ˜¯â€œevery coin has two sidesâ€ï¼Œæ²¡æœ‰å®Œç¾æ— ç¼ºçš„ç¼–ç¨‹è¯­è¨€ï¼ŒCè¯­è¨€ä¹Ÿæœ‰ç€å…¶è¯¸å¦‚ä»£ç é‡å¤§ã€é¢å‘è¿‡ç¨‹çš„ä¸€äº›ç¼ºç‚¹ï¼Œå¦‚ä½•è®©Pythonå…¼é¡¾Cè¯­è¨€é€Ÿåº¦æ–¹é¢çš„ä¼˜ç‚¹å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªå¾ˆå½¢è±¡çš„ä¾‹å­ï¼Œå°±åƒä¸Šå›¾å±•ç¤ºçš„ä¸€æ ·ï¼Œèµ›è½¦æ‰‹éœ€è¦å…¼é¡¾æ±½è½¦çš„å‘åŠ¨å¼•æ“çš„å†…è€—ç£¨æŸï¼Œä¹Ÿè¦å…¼é¡¾èµ›è½¦çš„è¿è¡Œé€Ÿåº¦ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•åœ¨ä¸¤è€…ä¹‹é—´å–å¾—å¹³è¡¡å‘¢ï¼Ÿ</p>
<p>å…¶å®æœ‰å¾ˆå¤šå¯ä»¥æé«˜è¿è¡Œé€Ÿåº¦çš„åŠæ³•ï¼Œæ¯”å¦‚ï¼š<br>
åˆ©ç”¨å¤šè¿›ç¨‹åº“æ¥ä½¿ç”¨æ‰€æœ‰çš„CPUå†…æ ¸ï¼›<br>
å¦‚æœä½ æ­£åœ¨ä½¿ç”¨NumPyï¼ŒPandasï¼Œæˆ–æ˜¯Scikit-Learnåº“ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Rapidsæ¥æé«˜GPUçš„å¤„ç†é€Ÿåº¦ã€‚</p>
<p>ä½†æ˜¯è¿™åªé’ˆå¯¹ä½ çš„ä»»åŠ¡å¯ä»¥å¹¶è¡Œçš„æƒ…å†µï¼Œä¾‹å¦‚æ•°æ®é¢„å¤„ç†ã€çŸ©é˜µæ“ä½œç­‰ï¼Œä¸Šè¿°åŠæ³•éƒ½å¾ˆæ£’ï¼Œå¯æ˜¯å¦‚æœä½ åªä½¿ç”¨çº¯Pythonè¯­è¨€ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå†æ¯”å¦‚ï¼Œä½ å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå¾ˆå¤§çš„forå¾ªç¯ï¼Œè€Œä¸”å› ä¸ºæ•°æ®å¿…é¡»è¢«é¡ºåºå¤„ç†å¯¼è‡´ä½ æ— æ³•ä½¿ç”¨çŸ©é˜µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰æ²¡æœ‰åŠæ³•æé«˜Pythonæœ¬èº«çš„é€Ÿåº¦å‘¢ï¼Ÿ</p>
<p>Cythonå°±æ˜¯ç”¨æ¥åŠ é€Ÿçº¯Pythonä»£ç çš„ã€‚</p>
<p>ä»€ä¹ˆæ˜¯Cythonï¼Ÿ<br>
ä»æœ¬è´¨ä¸Šè®²ï¼ŒCythonæ˜¯Pythonå’ŒC/C++çš„æ¡¥æ¢ã€‚å®ƒå…è®¸ä½ å¯¹Pythonä»£ç ç¨ä½œä¿®æ”¹ï¼Œç„¶åæŠŠPythonä»£ç ç›´æ¥ç¿»è¯‘æˆCè¯­è¨€ä»£ç ã€‚</p>
<p>ä½ å”¯ä¸€éœ€è¦ä¿®æ”¹Pythonä»£ç çš„åœ°æ–¹å°±æ˜¯åœ¨æ¯ä¸€ä¸ªå˜é‡å‰é¢åŠ ä¸Šå®ƒçš„ç±»å‹ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬åœ¨Pythoné‡Œä¼šè¿™æ ·å£°æ˜å˜é‡ï¼š</p>
<pre><code>x = 0.5
</code></pre>
<p>å¦‚æœä½¿ç”¨Cythonï¼Œæˆ‘ä»¬ä¼šç»™å˜é‡åŠ ä¸Šå®ƒçš„ç±»å‹ï¼š</p>
<pre><code>cdef float x = 0.5
</code></pre>
<p>è¿™ä¼šå‘Šè¯‰Cythonï¼Œæˆ‘ä»¬çš„å˜é‡æ˜¯æµ®ç‚¹å‹å˜é‡ï¼Œè¿™å’Œæˆ‘ä»¬åœ¨Cè¯­è¨€ä¸­çš„æ“ä½œä¸€æ ·ã€‚ä½¿ç”¨çº¯Pythonè¯­è¨€ï¼Œå˜é‡çš„æ•°æ®ç±»å‹åœ¨èµ‹å€¼åè¢«è‡ªåŠ¨å®šä¹‰ã€‚Cythonè¿™ç§æ˜¾å¼çš„å˜é‡å£°æ˜æ–¹æ³•ä½¿å¾—Pythonä»£ç è½¬æ¢æˆCä»£ç æˆä¸ºå¯èƒ½ï¼Œå› ä¸ºCè¯­è¨€è¦æ±‚å˜é‡çš„æ•°æ®ç±»å‹å¿…é¡»åœ¨å£°æ˜å˜é‡æ—¶å†™å‡ºæ¥ã€‚</p>
<p>ä½¿ç”¨pipå®‰è£…Cythonåªéœ€ä¸€è¡Œä»£ç :</p>
<pre><code>pip install cython
</code></pre>
<p>Cythonçš„æ•°æ®ç±»å‹</p>
<p>ä½¿ç”¨Cythonæ—¶ï¼ŒCythonæä¾›ä¸¤ç±»ç±»å‹ï¼Œä¸€ç±»ç”¨äºå˜é‡ï¼Œä¸€ç±»ç”¨äºå‡½æ•°ã€‚</p>
<p>å¯¹äºå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼ˆè¯·æ³¨æ„ï¼Œè¿™äº›ç±»å‹éƒ½æ¥è‡ªC/C++ï¼‰ï¼š</p>
<pre><code>cdef int a, b, c
cdef char *s
cdef float x = 0.5 (single precision)
cdef double x = 63.4 (double precision)
cdef list names
cdef dict goals_for_each_play
cdef object card_deck
</code></pre>
<p>å¯¹äºå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š<br>
def â€“ æ™®é€šçš„Pythonå‡½æ•°ï¼Œåªç”¨Pythonè§£é‡Šå™¨<br>
cdef â€“ Cythonä¸“ç”¨å‡½æ•°ï¼Œä¸èƒ½é€šè¿‡çº¯Pythonä»£ç ä½¿ç”¨è¯¥å‡½æ•°ï¼Œå¿…é¡»åœ¨Cythonå†…ä½¿ç”¨<br>
cpdef â€“ Cè¯­è¨€å’ŒPythonå…±ç”¨ã€‚å¯ä»¥é€šè¿‡Cè¯­è¨€æˆ–è€…Pythonä»£ç ä½¿ç”¨è¯¥å‡½æ•°</p>
<p>æœ‰äº†å¯¹Cythonçš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œå¼€å§‹åŠ é€Ÿæˆ‘ä»¬çš„ä»£ç äº†ï¼<br>
ä½¿ç”¨Cythonæé«˜ä»£ç çš„è¿è¡Œé€Ÿåº¦<br>
é¦–å…ˆï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªPythonä»£ç çš„åŸºå‡†â€”â€”ä½¿ç”¨ä¸€ä¸ªforå¾ªç¯æ¥è®¡ç®—æŸä¸ªæ•°çš„é˜¶ä¹˜ã€‚ä»¥ä¸‹æ˜¯ç”¨çº¯Pythonè¯­è¨€å†™çš„ä»£ç ï¼š</p>
<pre><code>def test(x):
    y = 1
    for i in range(1, x+1):
        y *= i
    return y
</code></pre>
<p>ä½¿ç”¨Cythonå†™å‡ºçš„å‡½æ•°å’Œçº¯Pythonä»£ç å†™å‡ºçš„å‡½æ•°å¾ˆç±»ä¼¼ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬è¦ç¡®ä¿Cythonä»£ç æ–‡ä»¶çš„æ‰©å±•åæ˜¯.pyxã€‚ç„¶åï¼Œæˆ‘ä»¬å”¯ä¸€ä¿®æ”¹çš„åœ°æ–¹å°±æ˜¯åœ¨æˆ‘ä»¬å·²å£°æ˜çš„æ¯ä¸ªå˜é‡å’Œå‡½æ•°å‰åŠ ä¸Šå®ƒä»¬çš„ç±»å‹ï¼Œrun_cython.pyxä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>cpdef int test(int x):
    cdef int y = 1
    cdef int i
    for i in range(1, x+1):
        y *= i
    return y
</code></pre>
<p>è¯·æ³¨æ„ï¼Œå‡½æ•°å‰æœ‰cpdefï¼Œä»¥ç¡®ä¿æˆ‘ä»¬å¯ä»¥é€šè¿‡Pythonè°ƒç”¨è¯¥å‡½æ•°ã€‚åŒæ—¶è¯·æ³¨æ„ï¼Œforå¾ªç¯é‡Œçš„å˜é‡iä¹Ÿæœ‰ç±»å‹ä¿¡æ¯ï¼Œä½ éœ€è¦è®¾å®šå‡½æ•°ä¸­æ‰€æœ‰å˜é‡çš„ç±»å‹ï¼Œè¿™æ ·Cè¯­è¨€ç¼–è¯‘å™¨æ‰èƒ½çŸ¥é“éœ€è¦ä½¿ç”¨ä»€ä¹ˆç±»å‹ï¼</p>
<p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªsetup.pyæ–‡ä»¶ï¼ŒæŠŠCythonä»£ç ç¿»è¯‘æˆCä»£ç :</p>
<pre><code>from distutils.core import setup
from Cython.Build import cythonize
setup(ext_modules = cythonize('run_cython.pyx'))
</code></pre>
<p>ç„¶åæ‰§è¡Œæ±‡ç¼–è¿‡ç¨‹,åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-python">æˆ‘ä»¬çš„Cä»£ç å·²ç»è¢«ç¼–è¯‘äº†ï¼Œå¯ä»¥ä½¿ç”¨äº†ï¼ä½ å¯ä»¥åœ¨æ–‡ä»¶å¤¹é‡Œçœ‹è§ä½ çš„Cythonä»£ç ï¼Œä½ æœ‰äº†æ‰€æœ‰è¿è¡ŒCä»£ç æ‰€éœ€è¦çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬run_cython.cæ–‡ä»¶ï¼Œæ–‡æ‘˜èŒåœ¨win10ç³»ç»Ÿå°è¯•åæ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹ï¼š
![](https://yooinn.github.io//post-images/1574325300058.jpg)
æ‰“å¼€run_cython.cåçš„éƒ¨åˆ†ä»£ç ï¼ˆä»£ç æœ‰ç‚¹é•¿ï¼Œæ­¤å¤„åªå±•ç¤ºå¼€å¤´å˜é‡å£°æ˜å’Œç»“å°¾çš„å‡½æ•°å®ç°ï¼‰
</code></pre>
<p>/<em><strong>the beginning part of the code</strong></em>/<br>
/* Generated by Cython 0.29.13 <em>/<br>
/</em> BEGIN: Cython Metadata<br>
{<br>
&quot;distutils&quot;: {<br>
&quot;name&quot;: &quot;run_cython&quot;,<br>
&quot;sources&quot;: [<br>
&quot;run_cython.pyx&quot;<br>
]<br>
},<br>
&quot;module_name&quot;: &quot;run_cython&quot;<br>
}<br>
END: Cython Metadata */</p>
<p>#define PY_SSIZE_T_CLEAN<br>
#include &quot;Python.h&quot;<br>
#ifndef Py_PYTHON_H<br>
#error Python headers needed to compile C extensions, please install development version of Python.<br>
#elif PY_VERSION_HEX &lt; 0x02060000 || (0x03000000 &lt;= PY_VERSION_HEX &amp;&amp; PY_VERSION_HEX &lt; 0x03030000)<br>
#error Cython requires Python 2.6+ or Python 3.3+.<br>
#else<br>
#define CYTHON_ABI &quot;0_29_13&quot;<br>
#define CYTHON_HEX_VERSION 0x001D0DF0<br>
#define CYTHON_FUTURE_DIVISION 0<br>
#include &lt;stddef.h&gt;<br>
#ifndef offsetof<br>
#define offsetof(type, member) ( (size_t) &amp; ((type*)0) -&gt; member )<br>
#endif<br>
#if !defined(WIN32) &amp;&amp; !defined(MS_WINDOWS)<br>
#ifndef __stdcall<br>
#define __stdcall<br>
#endif<br>
#ifndef __cdecl<br>
#define __cdecl<br>
#endif<br>
#ifndef __fastcall<br>
#define __fastcall<br>
#endif<br>
#endif<br>
#ifndef DL_IMP</p>
<p>/<em><em><strong>the end part of the code</strong></em>/<br>
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject</em> b) {<br>
Py_ssize_t ival;<br>
PyObject <em>x;<br>
#if PY_MAJOR_VERSION &lt; 3<br>
if (likely(PyInt_CheckExact(b))) {<br>
if (sizeof(Py_ssize_t) &gt;= sizeof(long))<br>
return PyInt_AS_LONG(b);<br>
else<br>
return PyInt_AsSsize_t(b);<br>
}<br>
#endif<br>
if (likely(PyLong_CheckExact(b))) {<br>
#if CYTHON_USE_PYLONG_INTERNALS<br>
const digit</em> digits = ((PyLongObject*)b)-&gt;ob_digit;<br>
const Py_ssize_t size = Py_SIZE(b);<br>
if (likely(__Pyx_sst_abs(size) &lt;= 1)) {<br>
ival = likely(size) ? digits[0] : 0;<br>
if (size == -1) ival = -ival;<br>
return ival;<br>
} else {<br>
switch (size) {<br>
case 2:<br>
if (8 * sizeof(Py_ssize_t) &gt; 2 * PyLong_SHIFT) {<br>
return (Py_ssize_t) (((((size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
case -2:<br>
if (8 * sizeof(Py_ssize_t) &gt; 2 * PyLong_SHIFT) {<br>
return -(Py_ssize_t) (((((size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
case 3:<br>
if (8 * sizeof(Py_ssize_t) &gt; 3 * PyLong_SHIFT) {<br>
return (Py_ssize_t) (((((((size_t)digits[2]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
case -3:<br>
if (8 * sizeof(Py_ssize_t) &gt; 3 * PyLong_SHIFT) {<br>
return -(Py_ssize_t) (((((((size_t)digits[2]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
case 4:<br>
if (8 * sizeof(Py_ssize_t) &gt; 4 * PyLong_SHIFT) {<br>
return (Py_ssize_t) (((((((((size_t)digits[3]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[2]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
case -4:<br>
if (8 * sizeof(Py_ssize_t) &gt; 4 * PyLong_SHIFT) {<br>
return -(Py_ssize_t) (((((((((size_t)digits[3]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[2]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[1]) &lt;&lt; PyLong_SHIFT) | (size_t)digits[0]));<br>
}<br>
break;<br>
}<br>
}<br>
#endif<br>
return PyLong_AsSsize_t(b);<br>
}<br>
x = PyNumber_Index(b);<br>
if (!x) return -1;<br>
ival = PyInt_AsSsize_t(x);<br>
Py_DECREF(x);<br>
return ival;<br>
}<br>
static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b) {<br>
return b ? __Pyx_NewRef(Py_True) : __Pyx_NewRef(Py_False);<br>
}<br>
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t ival) {<br>
return PyInt_FromSize_t(ival);<br>
}</p>
<p>#endif /* Py_PYTHON_H</p>
<pre><code>
ç°åœ¨æˆ‘ä»¬å¯ä»¥æµ‹è¯•æˆ‘ä»¬å…¨æ–°çš„ã€é€Ÿåº¦è¶…å¿«çš„Cä»£ç äº†ï¼çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼Œå®ƒæ˜¯æ¯”è¾ƒPythonä»£ç å’ŒCythonä»£ç é€Ÿåº¦çš„æµ‹è¯•ï¼š
</code></pre>
<p>import run_python<br>
import run_cython<br>
import time</p>
<p>number = 10</p>
<p>start = time.time()<br>
run_python.test(number)<br>
end =  time.time()</p>
<p>py_time = end - start<br>
print(&quot;Python time = {}&quot;.format(py_time))</p>
<p>start = time.time()<br>
run_cython.test(number)<br>
end =  time.time()</p>
<p>cy_time = end - start<br>
print(&quot;Cython time = {}&quot;.format(cy_time))</p>
<p>print(&quot;Speedup = {}&quot;.format(py_time /</p>
<pre><code>ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬ç”¨Pythonçš„æ–¹å¼å¯¼å…¥æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œç„¶åä¹ŸåƒPythoné‚£æ ·è¿è¡Œæˆ‘ä»¬çš„å‡½æ•°ï¼

åªéœ€ç¨ä½œä¿®æ”¹ï¼ŒCythonå°±å¯ä»¥å¸®ä½ åŠ é€Ÿå‡ ä¹æ‰€æœ‰çš„çº¯Pythonä»£ç ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½ ä½¿ç”¨çš„å¾ªç¯è¶Šå¤šã€éœ€è¦ç­›é€‰å¤„ç†çš„æ•°æ®è¶Šå¤šï¼ŒCythonå°±è¶Šèƒ½å‘æŒ¥åŠ é€Ÿçš„ä½œç”¨ã€‚

è¯·çœ‹ä¸‹é¢çš„è¡¨æ ¼ï¼Œå®ƒè®°å½•äº†Cythonåœ¨è®¡ç®—ä¸åŒæ•°é˜¶ä¹˜çš„è¿è¡Œé€Ÿåº¦ï¼Œnumberçš„å€¼ä»10åˆ°10000000ï¼Œä½¿ç”¨Cythonï¼Œæˆ‘ä»¬çš„é€Ÿåº¦æé«˜äº†36å€ï¼
![](https://yooinn.github.io//post-images/1574325417583.jpg)
ä»¥ä¸Šå¯¹Cythonçš„ä»‹ç»ï¼Œå¸Œæœ›å¯ä»¥ç»™ä¹ æƒ¯ä½¿ç”¨Pythonè¿›è¡Œç¼–ç¨‹çš„è¯»è€…å¸¦æ¥å¸®åŠ©ã€‚æ–‡æ‘˜èŒä¹Ÿå¼ºåŠ¿å®‰åˆ©è¿™æ¬¾CythonåŠ é€Ÿå™¨ï¼Œå¸¦ä½ åœ¨Pythonçš„é“è·¯ä¸Šé©°éª‹ï¼

</code></pre>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://yooinn.github.io//post/django-tai-qiang-da-fa-xian-liao-yi-ge-xing-neng-you-hua-shen-qi">
                                      <h3 class="post-title">
                                          Djangoå¤ªå¼ºå¤§ï¼Œå‘ç°äº†ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–ç¥å™¨
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              
                                  <div id="gitalk-container"></div>
                              

                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://yooinn.github.io/" target="_blank">Jiank</a></p>
</footer>


    
<!-- jQuery -->
<script src="https://yooinn.github.io//media/scripts/vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://yooinn.github.io//media/scripts/vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://yooinn.github.io//media/scripts/vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://yooinn.github.io//media/scripts/vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://yooinn.github.io//media/scripts/vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://yooinn.github.io//media/scripts/vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        <script>

            var gitalk = new Gitalk({
                clientID: '18da3e757583aa6301c0',
                clientSecret: '49cea6508bf61d7606bce51766288ea312bd7456',
                repo: 'yooinn.github.io',
                owner: 'yooinn',
                admin: ['yooinn'],
                id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                distractionFreeMode: false  // Facebook-like distraction free mode
            })

            gitalk.render('gitalk-container')

        </script>
    

    




  </body>
</html>
